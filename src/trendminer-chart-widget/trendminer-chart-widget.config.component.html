<div>
    <div class="configSection">
        <label for="TrendminerChartWidgetConfig">
            Trendminer Configuration
        </label>
        <!-- 
            Basic config for tren miner access - for example basic url (proxy or direct) 
            timeseries to show, dates etc...
        -->
        <div class="col-lg-12 col-layout">
            <div class="input-group mb-1">
                <div class="input-group-prepend">
                    <span class="input-group-text help-icon" id="basic-addon1">
                        Address
                        <img src="{{CONST_HELP_IMAGE_FILE}}" alt="help tooltip"
                             title="enter the proxy prefix for api calls to trendminer .">

                    </span>
                </div>
                <input class="form-control" type="text"
                       name="proxy" [(ngModel)]="widgetHelper.getWidgetConfig().proxy" (change)="onConfigChanged()">
            </div>
        </div>
        <!-- 
            time series selection
        -->
        <div class="row form-group">
            <div class="col-lg-6">
                <label class="label-with-help" for="TrendminerChartWidget-myValue">
                    select one or more series to chart
                    <span class="help-icon">
                        <img src="{{CONST_HELP_IMAGE_FILE}}" alt="help tooltip"
                             title="Select one or more time series for the chart.">
                    </span>
                    <ng-select
                               [items]="items$ | async"
                               bindLabel="name"
                               [closeOnSelect]="true"
                               [multiple]="true"
                               [hideSelected]="true"
                               [typeahead]="input$"
                               [(ngModel)]="widgetHelper.getWidgetConfig().seriesNames"
                               (change)="onConfigChanged()">
                    </ng-select>
                </label>
            </div>
        </div>
        <!-- 
            Date ranges
        -->
        <div class="row form-group">
            <div class="col-lg-6 col-layout">
                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text help-icon" id="basic-addon1">
                            start date
                            <img src="{{CONST_HELP_IMAGE_FILE}}" alt="help tooltip"
                                 title="Choose the start date and time for the chart.">

                        </span>
                    </div>
                    <input class="form-control" type="date" id="startDate" name="startDate"
                           value="widgetHelper.getWidgetConfig().startDate"
                           [(ngModel)]="widgetHelper.getWidgetConfig().startDate"
                           (change)="onConfigChanged()">
                    <input class="form-control" type="time" id="startTime" name="startTime"
                           value="widgetHelper.getWidgetConfig().startTime"
                           [(ngModel)]="widgetHelper.getWidgetConfig().startTime"
                           (change)="onConfigChanged()">
                </div>

            </div>
            <div class="col-lg-6 col-layout">
                <div class="input-group mb-1">
                    <div class="input-group-prepend">
                        <span class="input-group-text help-icon" id="basic-addon1">
                            end date
                            <img src="{{CONST_HELP_IMAGE_FILE}}" alt="help tooltip"
                                 title="Select the end date and time for the chart.">

                        </span>
                    </div>
                    <input class="form-control" type="date" id="endDate" name="endDate"
                           value="widgetHelper.getWidgetConfig().endDate"
                           [(ngModel)]="widgetHelper.getWidgetConfig().endDate" (change)="onConfigChanged()">
                    <input class="form-control" type="time" id="endTime" name="endTime"
                           value="widgetHelper.getWidgetConfig().endTime"
                           [(ngModel)]="widgetHelper.getWidgetConfig().endTime"
                           (change)="onConfigChanged()">
                </div>

            </div>

        </div>

    </div>

    <!-- 
        next section chart details 
    -->
    <ng-container *ngIf="widgetHelper.getWidgetConfig().hasSeries()">
        <div class="configSection">
            <label for="TrendminerChartWidgetConfig">
                Chart Options
            </label>
            <div class="row">
                <!-- Fill under line -->
                <div class="form-check-inline col-lg-2">
                    <label class="label-with-help" class="form-check-label" for="fillArea" translate>
                        <input class="form-check-input" type="checkbox" name="fillArea"
                               [(ngModel)]="widgetHelper.getWidgetConfig().fillArea"
                               (ngModelChange)="onConfigChanged()" /> Fill area<span class="help-icon">
                            <img src="{{CONST_HELP_IMAGE_FILE}}" alt="help tooltip"
                                 title="Fill the area under the line with the color of the series.">
                        </span>
                    </label>
                </div>

                <!-- fit Y axis -->
                <div class="form-check-inline col-lg-2">
                    <label class="label-with-help" class="form-check-label" for="beginAtZero2" translate>
                        <input class="form-check-input" type="checkbox" name="beginAtZero2"
                               [(ngModel)]="widgetHelper.getWidgetConfig().fitAxis"
                               (ngModelChange)="onConfigChanged()" /> Fit axes<span class="help-icon">
                            <img src="{{CONST_HELP_IMAGE_FILE}}" alt="help tooltip"
                                 title="Fit the range of the chart axes to the data.">
                        </span>
                    </label>
                </div>
            </div>
        </div>
    </ng-container>

    <!-- next section series details -->
    <ng-container *ngIf="widgetHelper.getWidgetConfig().hasSeries()">
        <div class="configSection">
            <label for="TrendminerChartWidgetConfig">
                Series Options
            </label>

            <!-- Each series -->
            <ng-container *ngFor="let seriesKey of widgetHelper.getWidgetConfig().seriesKeys()">
                <!-- color -->
                <div class="row">
                    <div class=" col-lg-3">

                        <label for="TrendminerChartWidgetConfig">
                            {{seriesKey}}
                        </label>
                        <input class="form-control" type="color" [ngModelOptions]="{ standalone: true }"
                               [(ngModel)]="widgetHelper.getWidgetConfig().series[seriesKey].color"
                               [value]="widgetHelper.getWidgetConfig().series[seriesKey].color"
                               (ngModelChange)="onConfigChanged()" />
                    </div>
                </div>
            </ng-container>
        </div>
    </ng-container>
</div>